{% extends 'FulgurioLightCMSBundle::adminBase.html.twig' %}

{% block content %}
{% if userId is defined %}
{%   set legend = 'fulgurio.lightcms.users.edit_form.legend' %}
{%   set action = path('AdminUsersEdit', { 'userId' : userId} ) %}
{% else %}
{%   set legend = 'fulgurio.lightcms.users.add_form.legend' %}
{%   set action = path('AdminUsersAdd') %}
{% endif %}
<form action="{{ action }}" method="post">
	<fieldset>
		<legend>{{ legend|trans({}, 'admin') }}</legend>
{% if form.getChild('username').get('errors')
    or form.getChild('email').get('errors')
    or form.getChild('password').get('errors') %}
			<div class="alert alert-error">
{%   for error in form.getChild('username').get('errors') %}{{ error.messageTemplate|trans({}, 'admin') }}<br />{%   endfor %}
{%   for error in form.getChild('email').get('errors') %}{{ error.messageTemplate|trans({}, 'admin') }}<br />{%   endfor %}
{%   for error in form.getChild('password').get('errors') %}{{ error.messageTemplate|trans({}, 'admin') }}<br />{%   endfor %}
			</div>
{% endif %}
		<div class="row">
			<div class="span11">
				<div class="control-group">
					<label class="control-label" for="u_username">{% trans from 'admin' %}fulgurio.lightcms.users.add_form.username_label{% endtrans %}</label>
					<div class="controls">
						<input type="text" id="u_username" class="input-xlarge" name="{{ form.getChild('username').get('full_name') }}" value="{{ form.getChild('username').get('value') }}" autocomplete="off" />
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="u_password_first">{% trans from 'admin' %}fulgurio.lightcms.users.add_form.password_label{% endtrans %}</label>
					<div class="controls">
						<input type="password" id="u_password_first" class="input-xlarge" name="{{ form.getChild('password').getChild('first').get('full_name') }}" autocomplete="off" />
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="u_password_second">{% trans from 'admin' %}fulgurio.lightcms.users.add_form.password_second_label{% endtrans %}</label>
					<div class="controls">
						<input type="password" id="u_password_second" class="input-xlarge" name="{{ form.getChild('password').getChild('second').get('full_name') }}" autocomplete="off" />
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="u_email">{% trans from 'admin' %}fulgurio.lightcms.users.add_form.email_label{% endtrans %}</label>
					<div class="controls">
						<input type="email" id="u_email" class="input-xlarge" name="{{ form.getChild('email').get('full_name') }}" value="{{ form.getChild('email').get('value') }}" />
					</div>
				</div>
				<div class="control-group">
					<label class="checkbox" for="u_is_active">{% trans from 'admin' %}fulgurio.lightcms.users.add_form.is_active_label{% endtrans %}
						<input type="checkbox" id="u_is_active" class="input-xlarge" name="{{ form.getChild('is_active').get('full_name') }}"{% if form.getChild('is_active').get('checked') %} checked="checked"{% endif %} />
					</label>
				</div>
			</div>
		</div>
		<div class="form-actions">
			<input type="hidden" name="{{ form.getChild('_token').get('full_name') }}" value="{{ form.getChild('_token').get('value') }}" />
			<button type="submit" class="btn btn-primary" name="realSubmit" value="1">{% trans from 'admin' %}fulgurio.lightcms.save{% endtrans %}</button>
			<a href="{{ path('AdminUsers') }}" class="btn">{% trans from 'admin' %}fulgurio.lightcms.cancel{% endtrans %}</a>
		</div>
	</fieldset>
</form>
{% endblock %}

{% block title %}{% if userId is defined %}{% trans from 'admin' %}fulgurio.lightcms.users.edit_form.title{% endtrans %}{% else %}{% trans from 'admin' %}fulgurio.lightcms.users.add_form.title{% endtrans %}{% endif %}{% endblock %}